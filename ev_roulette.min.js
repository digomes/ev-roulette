function EvWeapon(a,b){this.id=a;this.weapon_name=b.weapon_name;this.skin_name=b.skin_name;this.rarity=b.rarity;this.steam_image=b.steam_image;this.el=null}EvWeapon.EL_WIDTH=200;EvWeapon.prototype.render=function(){var a=document.createElement("div"),b=document.createElement("div"),d=document.createElement("div"),c=document.createElement("img"),e=document.createElement("div"),f=document.createElement("p"),h=document.createElement("p");c.src=this.steam_image;c.alt=this.weapon_name;f.textContent=this.weapon_name;h.textContent=this.skin_name;a.className="ev-weapon";b.className="ev-weapon-inner";d.className="ev-weapon-rarity ev-weapon-rarity-"+this.rarity;e.className="ev-weapon-text";e.appendChild(f);e.appendChild(h);b.appendChild(d);b.appendChild(c);b.appendChild(e);a.appendChild(b);this.el=a};function EvRoulette(){this.weapons=[];this.el_weapons=this.el=null}EvRoulette.N_WEAPONS=20;EvRoulette.WEAPON_PRIZE_ID=EvRoulette.N_WEAPONS-3;EvRoulette.SPIN_SECS=10;EvRoulette.START_DELAY_MSECS=1E3;EvRoulette.SOUND_SPIN_INTERVAL=100;EvRoulette.SOUND_START="snd/roulette_start.wav";EvRoulette.SOUND_SPIN="snd/roulette_spin.wav";EvRoulette.SOUND_STOP="snd/roulette_stop.wav";EvRoulette.prototype.set_weapons=function(a,b){var d=[],c=b.length,e=0,f=function(a,f){var g;for(g=a;g<=f;g+=1)d[g]=new EvWeapon(g,b[e]),e=e===c-1?0:e+1};if(0===c)throw Error("\u041e\u0448\u0438\u0431\u043a\u0430! \u041d\u0435\u0442 \u0430\u043a\u0442\u0451\u0440\u043e\u0432.");f(0,EvRoulette.WEAPON_PRIZE_ID-1);d[EvRoulette.WEAPON_PRIZE_ID]=new EvWeapon(EvRoulette.WEAPON_PRIZE_ID,a);f(EvRoulette.WEAPON_PRIZE_ID+1,EvRoulette.N_WEAPONS-1);this.weapons=d};EvRoulette.prototype.render=function(a){var b=document.createElement("div"),d=document.createElement("div"),c=document.createElement("div");b.id="ev-roulette";d.id="ev-target";c.id="ev-weapons";c.style.width=EvRoulette.N_WEAPONS*EvWeapon.EL_WIDTH+"px";this.weapons.forEach(function(a){a.render();c.appendChild(a.el)});b.appendChild(d);b.appendChild(c);a.appendChild(b);this.el_weapons=c;this.el=b};EvRoulette.prototype.make_sound=function(a){a=new Audio(a);a.volume=.2;a.play()};EvRoulette.prototype.start=function(){var a=this,b=Math.floor(EvWeapon.EL_WIDTH/2),d=Math.floor(EvWeapon.EL_WIDTH/20),c=(EvRoulette.N_WEAPONS-5)*EvWeapon.EL_WIDTH+b+(Math.floor(Math.random()*(19*d-d+1))+d),e,f=0;a.el_weapons.style.transition="left "+EvRoulette.SPIN_SECS+"s ease-out";setTimeout(function(){a.make_sound(EvRoulette.SOUND_START);a.el_weapons.style.left="-"+c+"px";e=setInterval(function(){var c=Math.abs(parseInt(window.getComputedStyle(a.el_weapons).left,10)),c=Math.floor((c+b)/EvWeapon.EL_WIDTH);c>f&&(f=c,a.make_sound(EvRoulette.SOUND_SPIN))},EvRoulette.SOUND_SPIN_INTERVAL)},EvRoulette.START_DELAY_MSECS);a.el_weapons.addEventListener("transitionend",function(){clearInterval(e);a.make_sound(EvRoulette.SOUND_STOP);a.weapons.forEach(function(a){a.id!==EvRoulette.WEAPON_PRIZE_ID&&(a.el.style.opacity=.5)})})};